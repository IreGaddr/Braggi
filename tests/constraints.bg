// Demonstration of constraint propagation in Braggi

region ConstraintRegion(4096) regime RAND {
    func validate_password(password) -> bool {
        // Define constraints on valid passwords
        constrain length(password) >= 8;
        constrain contains(password, "[A-Z]");  // Must contain uppercase
        constrain contains(password, "[a-z]");  // Must contain lowercase
        constrain contains(password, "[0-9]");  // Must contain digit
        constrain contains(password, "[!@#$%^&*]");  // Must contain special char
        
        // Try to collapse - if any constraint is violated, this will fail
        try {
            collapse password;
            return true;  // All constraints satisfied
        } catch (ConstraintViolation cv) {
            out("Password invalid: " + cv.message);
            return false;  // Constraint violation
        }
    }
    
    func main() -> int {
        var passwords = [
            "password",
            "Password1",
            "Password1!",
            "pass"
        ];
        
        for (var i = 0; i < length(passwords); i++) {
            var password = passwords[i];
            out("Checking password: " + password);
            var valid = validate_password(password);
            out("Valid: " + valid);
            out("");
        }
        
        return 0;
    }
} 